<div ng-app="app">
  <div ng-controller='personCtrl'>
    <div class="container">
      <% if flash[:success] %>
        <div class="alert alert-success alert-dismissible">
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <strong><%= success %></strong>
        </div>
      <% end %>
      <h2 class="page header">Spotify Take-Home Challenge</h2>
      <p>by Lianna Newman</p>

      <strong>Directions</strong>
      <p>
        Utilizing the table below you can view, add, and delete people
        1) To edit a person simply click on the person's name or favorite city
        2) To delete a person use the 'Delete Person' button in the table or click on 'View
        Person' and delete from the view page
        3) To add a new person please use the form below the table
      </p>
        <div class="row">
          <div class="col-lg-12">
            <div class="table_outer">
              <table class="table table-bordered table-hover table-striped">
                <thead>
                  <tr>
                    <td>Id</td>
                    <td>Name</td>
                    <td>Favorite City</td>
                    <td>View Person</td>
                    <td>Delete Person</td>
                  </tr>
                </thead>
                <tbody>
                  <tr class="odd gradeX" ng-repeat="person in people">
                    <td>{{person.id}}</td>
                    <td>
                      <span ng-hide="editing" ng-click="editing = true"> {{person.name}} </span>
                      <form ng-show="editing" ng-submit="editing = false">
                        <input type="text" ng-model="person.name" placeholder="Name" ng-required/>
                        <br/>
                        <button class="btn btn-default" type="submit" ng-click="editPerson(person)">Update</button>
                      </form>
                    </td>
                    <td>
                      <span ng-hide="editing" ng-click="editing = true"> {{person.favoriteCity}} </span>
                      <form ng-show="editing" ng-submit="editing = false">
                        <input type="text" ng-model="person.favoriteCity" placeholder="Favorite City" ng-required/>
                        <br/>
                        <button class="btn btn-default" type="submit" ng-click="editPerson(person)">Update</button>
                      </form>
                    </td>
                    <td><a href="/people/{{person.id}}">View Person</a></td>
                    <td><input type="button" value="Delete Person" class="btn btn-danger" ng-click="deletePerson(person)"/></td>
                  </tr>
                </tbody>
              </table>
            <div class="table-responsive">
              <table class="table table-bordered table-hover table-striped">
                <thead>
                  <tr>
                    <div class="alert alert-success hide" id="person">
                    <th>Name</th>
                    <th>Favorite City</th>
                    <th>Add Person</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><input type="text" class="form-control" ng-model="person.name" placeholder="Person's Name"></td>
                    <td><input type="text" class="form-control" ng-model="person.favoriteCity" placeholder="Person's Favorite City"></td>
                    <td><input type="button" value="Add Person" class="btn btn-primary" ng-click='addPerson(person)'></td>
                  </tr>
                </tbody>
              </table>
             </div>
            </div>
          </div>
        </div>
    </div>
  </div>
</div>
